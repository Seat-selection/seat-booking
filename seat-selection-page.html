<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>电影院选票</title>
</head>

<body>
    <div id="seat-selection">
        <canvas id="seat-map">
        </canvas>
        <script>
            const canvas = document.getElementById("seat-map");
            canvas.width = 1000;  // 绘图区域宽度（像素）
            canvas.height = 700;
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height - 100;
            console.log(centerX, centerY);
            
            console.log(canvas.width, canvas.height)
            
            
            const cinemaConfig = {
                small: { rows: 5, cols: 20, baseRadius: 300, rowSpacing: 40 },
                medium: { rows: 10, cols: 20, baseRadius: 200, rowSpacing: 35 },
                large: { rows: 10, cols: 30, baseRadius: 255, rowSpacing: 30 }
            };

            // 当前使用的配置
            let currentConfig = cinemaConfig.medium;
            let rowSpacing = currentConfig.rowSpacing;
            let ROWS = currentConfig.rows;
            let COLS = currentConfig.cols;
            let baseRadius = currentConfig.baseRadius;

            function getSeatPosition(row, col) {
                console.log("draw",row, col);
                const radius = baseRadius + row * rowSpacing;
                const angleStep = Math.PI / 1.5 / (COLS - 1);
                const angle = Math.PI - ((Math.PI - angleStep * (COLS - 1)) / 2 + col * angleStep);
                // console.log(radius, angle / Math.PI * 180, angleStep / Math.PI * 180, col * angleStep / Math.PI * 180);
                const x = centerX + radius * Math.cos(angle);
                const y = centerY - radius * Math.sin(angle);
                // const y = 100;
                return {x, y};
            }
            function changeSeatState(row, col, state) {
                // 绘制座位
                const { x, y } = getSeatPosition(row, col);
                console.log(x, y);
                ctx.beginPath();
                ctx.arc(x, y, 7, 0, Math.PI * 2);
                ctx.fillStyle = state;
                ctx.fill();
            }
            function drawColumnLabels() {
                ctx.font = '14px Arial';
                ctx.fillStyle = 'black';
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                for (var i = 0; i < COLS; i++) {
                    const {x, y} = getSeatPosition(ROWS, i);
                    ctx.fillText((i + 1).toString(), x, y);
                }
            }
            function drawRowLabels() {
                ctx.font = '14px Arial';
                ctx.fillStyle = 'black';
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                for (var i = 0; i < ROWS; i++) {
                    const {x, y} = getSeatPosition(i, -1);
                    ctx.fillText((i + 1).toString(), x, y);
                }
            }
            function render() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.arc(centerX, centerY, 6, 0, Math.PI * 2);
                // ctx.arc(100, 100, 6, 0, Math.PI * 2);
                ctx.fillStyle = 'red';
                ctx.fill();
                for (var i = 0; i < ROWS; i++) {
                    for (var j = 0; j < COLS; j++) {
                        changeSeatState(i, j, 'yellow');
                    }
                }
                changeSeatState(0, 0, 'yellow');
                drawColumnLabels();
                drawRowLabels();
                // changeSeatState(0, 0, 'yellow'); 
                // changeSeatState(0, 29, 'yellow'); 
            }
            render();
        </script>
        <div id="option">
            <!-- <div id="manual">
            </div> -->
            <!-- <button id="manual" >
                手动选票
            </button> -->
            <!-- <div id="auto">
            </div> -->
            <button id="auto">
                自动选票
            </button>
        </div>
        <div id="check">
            <div id="check-button">
            </div>
        </div>
    </div>
    <div id="people">
        <div id="addition">
            <div id="addition-button">
            </div>
        </div>
        <div id="audience-list">
            <div id="audience">
            </div>
            <div id="audience">
            </div>
            <div id="audience">
            </div>
            <div id="audience">
            </div>
            <div id="audience">
            </div>
        </div>
        <div id="done">
            <div id="done-button">
            </div>
        </div>
    </div>
</body>

<style>
    body {
        display: flex;
        height: 100vh;
        justify-content: center;
        align-items: center;
        gap: 40px; 
    }
    #seat-selection {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: center;
        justify-content: space-around;
        align-items: center;
        height: 850px;
        width: 1000px;
        background-color: rgba(37, 12, 147, 0.3);
    }
    #people {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        height: 800px;
        width: 400px;
        background-color: rgba(37, 12, 147, 0.3);
    }
    #seat-map {
        /* position: relative; */
        height: 700px;
        width: 1000px;
        /* background-color: rgba(179, 238, 16, 0.3); */
    }
    #option {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        /* gap: 70px; */
        height: 70px;
        width: 700px;
        background-color: rgba(16, 200, 65, 0.3);
    }
    #check {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 70px;
        width: 700px;
        background-color: rgba(16, 200, 65, 0.3);
    }
    #auto, #check-button, #addition-button, #done-button {
        border: none; 
        outline: none;
        position: relative;
        height: 60px;
        width: 180px;
        border-radius: 8px;
        background-color: rgba(13, 38, 84, 0.3);
    }
    #auto:hover, #check-button:hover, #addition-button:hover, #done-button:hover {
        box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
    }
    #auto:active, #check-button:active, #addition-button:active, #done-button:active {
        box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        transform: translateY(1px);
    }
    #auto {
        background-color: #3498db;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }
    #auto:hover {
        background-color: #2980b9; /* 悬停时加深颜色 */
    }
    #auto:active {
        background-color: #2070a0; /* 点击时进一步加深 */
    }

    #check-button {
        background-color: #3498db;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }
    #check-button:hover {
        background-color: #2980b9; /* 悬停时加深颜色 */
    }
    #check-button:active {
        background-color: #2070a0; /* 点击时进一步加深 */
    }


    #addition, #done {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100px;
        width: 320px;
        background-color: rgba(179, 238, 16, 0.3);
    }
    #audience-list {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 20px;
        justify-content: center;
        align-items: center;
        height: 500px;
        width: 320px;
        background-color: rgba(179, 238, 16, 0.3);
    }
    #audience {
        position: relative;
        height: 50px;
        width: 280px;
        background-color: rgba(13, 38, 84, 0.3);
    }
    #seat-selection::before, #people::before, #seat-map::before, #option::before, #manual::before, #auto::before, #check::before, 
    #check-button::before, #addition::before, #addition-button::before, #audience-list::before, #audience::before,
    #done::before, #done-button::before {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 12px;
        color: #000000;
        font-family: monospace;
    }
    #seat-selection::before {
        content: "选座模块 id=\"seat-selection\"";
    }
    #people::before {
        content: "购票人 id=\"people\"";
    }
    #seat-map::before {
        content: "座位图 id=\"seat-map\"";
    }
    #option::before {
        content: "自动或手动选座选项 id=\"option\"";
    }
    /* #manual::before {
        content: "手动选座按钮 id=\"manual\"";
    }
    #auto::before {
        content: "自动选座按钮 id=\"auto\"";
    } */
    #check::before {
        content: "id=\"check\"";
    }
    #check-button::before {
        content: "查看我的购票按钮 id=\"check-button\"";
    }
    #addition::before {
        content: "id=\"addition\"";
    }
    #addition-button::before {
        content: "添加观影人按钮 id=\"addition-button\"";
    }
    #audience-list::before {
        content: "观影人列表 id=\"audience-list\"";
    }
    #audience::before {
        content: "观影人 id=\"audience\"";
    }
    #done::before {
        content: "id=\"done\"";
    }
    #done-button::before {
        content: "\"我选好了\"按钮 id=\"done-button\"";
    }
</style>